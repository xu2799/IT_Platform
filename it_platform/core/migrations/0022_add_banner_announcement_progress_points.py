# Generated by Django 5.0.3 on 2025-12-17 06:00

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('core', '0021_add_message_attachment'),
    ]

    operations = [
        migrations.CreateModel(
            name='Announcement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200, verbose_name='å…¬å‘Šæ ‡é¢˜')),
                ('content', models.TextField(verbose_name='å…¬å‘Šå†…å®¹')),
                ('announce_type', models.CharField(choices=[('info', 'é€šçŸ¥'), ('warning', 'è­¦å‘Š'), ('success', 'å–œè®¯')], default='info', max_length=20, verbose_name='å…¬å‘Šç±»å‹')),
                ('is_active', models.BooleanField(default=True, verbose_name='æ˜¯å¦æ˜¾ç¤º')),
                ('is_pinned', models.BooleanField(default=False, verbose_name='æ˜¯å¦ç½®é¡¶')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'å…¬å‘Š',
                'verbose_name_plural': 'å…¬å‘Š',
                'ordering': ['-is_pinned', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Badge',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, unique=True, verbose_name='å‹‹ç« åç§°')),
                ('icon', models.CharField(default='ğŸ…', max_length=10, verbose_name='å‹‹ç« å›¾æ ‡(emoji)')),
                ('description', models.TextField(verbose_name='è·å–æ¡ä»¶æè¿°')),
                ('condition_type', models.CharField(max_length=50, verbose_name='æ¡ä»¶ç±»å‹')),
                ('condition_value', models.PositiveIntegerField(default=1, verbose_name='æ¡ä»¶æ•°å€¼')),
                ('order', models.PositiveIntegerField(default=0, verbose_name='æ’åº')),
            ],
            options={
                'verbose_name': 'å‹‹ç« ',
                'verbose_name_plural': 'å‹‹ç« ',
                'ordering': ['order'],
            },
        ),
        migrations.CreateModel(
            name='Banner',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(blank=True, max_length=100, verbose_name='æ ‡é¢˜')),
                ('image', models.ImageField(upload_to='banners/', verbose_name='è½®æ’­å›¾ç‰‡')),
                ('link', models.URLField(blank=True, verbose_name='è·³è½¬é“¾æ¥')),
                ('order', models.PositiveIntegerField(default=0, help_text='æ•°å€¼è¶Šå°è¶Šé å‰', verbose_name='æ’åº')),
                ('is_active', models.BooleanField(default=True, verbose_name='æ˜¯å¦å¯ç”¨')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'è½®æ’­å›¾',
                'verbose_name_plural': 'è½®æ’­å›¾',
                'ordering': ['order', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PointRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(choices=[('watch', 'è§‚çœ‹è§†é¢‘'), ('comment', 'å‘è¡¨è¯„è®º'), ('submit', 'æäº¤ä½œä¸š'), ('login', 'æ¯æ—¥ç™»å½•')], max_length=20, verbose_name='è¡Œä¸ºç±»å‹')),
                ('points', models.IntegerField(default=0, verbose_name='ç§¯åˆ†å˜åŒ–')),
                ('description', models.CharField(blank=True, max_length=200, verbose_name='æè¿°')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='point_records', to=settings.AUTH_USER_MODEL, verbose_name='ç”¨æˆ·')),
            ],
            options={
                'verbose_name': 'ç§¯åˆ†è®°å½•',
                'verbose_name_plural': 'ç§¯åˆ†è®°å½•',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='UserPoints',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('total_points', models.PositiveIntegerField(default=0, verbose_name='æ€»ç§¯åˆ†')),
                ('level', models.PositiveIntegerField(default=1, verbose_name='ç­‰çº§')),
                ('continuous_days', models.PositiveIntegerField(default=0, verbose_name='è¿ç»­å­¦ä¹ å¤©æ•°')),
                ('last_active_date', models.DateField(blank=True, null=True, verbose_name='æœ€åæ´»è·ƒæ—¥æœŸ')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='points', to=settings.AUTH_USER_MODEL, verbose_name='ç”¨æˆ·')),
            ],
            options={
                'verbose_name': 'ç”¨æˆ·ç§¯åˆ†',
                'verbose_name_plural': 'ç”¨æˆ·ç§¯åˆ†',
            },
        ),
        migrations.CreateModel(
            name='UserBadge',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('earned_at', models.DateTimeField(auto_now_add=True, verbose_name='è·å¾—æ—¶é—´')),
                ('badge', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='owners', to='core.badge', verbose_name='å‹‹ç« ')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='badges', to=settings.AUTH_USER_MODEL, verbose_name='ç”¨æˆ·')),
            ],
            options={
                'verbose_name': 'ç”¨æˆ·å‹‹ç« ',
                'verbose_name_plural': 'ç”¨æˆ·å‹‹ç« ',
                'ordering': ['-earned_at'],
                'unique_together': {('user', 'badge')},
            },
        ),
        migrations.CreateModel(
            name='VideoProgress',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('last_position', models.FloatField(default=0.0, verbose_name='ä¸Šæ¬¡æ’­æ”¾ä½ç½®(ç§’)')),
                ('duration', models.FloatField(default=0.0, verbose_name='è§†é¢‘æ€»æ—¶é•¿(ç§’)')),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('lesson', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='video_progress', to='core.lesson', verbose_name='è¯¾æ—¶')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='video_progress', to=settings.AUTH_USER_MODEL, verbose_name='ç”¨æˆ·')),
            ],
            options={
                'verbose_name': 'æ’­æ”¾è¿›åº¦',
                'verbose_name_plural': 'æ’­æ”¾è¿›åº¦',
                'unique_together': {('user', 'lesson')},
            },
        ),
    ]
